title: Mac下的整套翻墙方案
categories: 
  - 工具
  - 其他
tags:
  - Mac
  - 翻墙
date: 2016-10-12 22:20:33
author: mzeht
avatar: /images/favicon.png
---

最近brew升级网络速度很慢，加上Macos系统版本的变化，升级的变化也较大，（权限变化，需要用到brew的建议尽快升级）执行brew update老半天还失败，于是寻找命令行翻墙的解决方法，期间尝试了proxychains，效果不好，`我和同学os一个版本的，他可以，我的不行`，于是找别的解决方法

<!-- more -->

# 基本准备

可用的shawdowsocks账号，图省事儿，我自己用的是付费的，我的推荐链接[点击这里](https://portal.shadowsocks.com/clientarea.php?action=products)，这样可以奖励我几块钱，`但是没什么用，我又不会去真的取出来。。。`
![](http://7xqtsx.com1.z0.glb.clouddn.com/16-12-25/60755449-file_1482665290388_14ddb.png)
点击绿色按钮，就会看到给你的代理信息

# 安装软件
上面网址下载资源有ss的mac客户端，但是不能开启http代理，功能不够强大，这里我们使用`Shadowsocks-NG`客户端，是它的增强版，
[项目github地址](https://github.com/shadowsocks/ShadowsocksX-NG)
![](http://7xqtsx.com1.z0.glb.clouddn.com/16-12-25/70231903-file_1482665629085_119e8.png)
可以看到完全满足较新Mac操作系统的要求，下载之后安装

# 设置软件
安装好的软件上有扫描屏幕上二维码的功能，逐一点开网站的代理二维码信息，完成导入
![](http://7xqtsx.com1.z0.glb.clouddn.com/16-12-25/61623448-file_1482665836110_12398.png)
>可以看到，相比于一般的ss客户端，此版本代理端口有变化，默认1086

#浏览器端配置
google浏览器配合插件SwitchyOmega
插件设置代理协议，地址，端口，以及不代理本地的常用localhost
> 注意端口和ss客户端保持一致

![](http://7xqtsx.com1.z0.glb.clouddn.com/16-12-25/83024472-file_1482666059530_14152.png)

日常使用选择模式 auto switch
![](http://7xqtsx.com1.z0.glb.clouddn.com/16-12-25/64770784-file_1482666144537_5bdf.png)

#命令行配置
由于此客户端配置了http代理，所以我们在命令行中使用也很方便

配置一个别名方便启动

```
vim ~/.bash_profile
```
添加

```
# Custom Add not System
alias proxy-on='export http_proxy=127.0.0.1:1087;export https_proxy=$http_proxy'
alias proxy-off='unset http_proxy;unset https_proxy'
```

这样在命令行中就可以通过proxy-on，proxy-off来对需要翻墙的操作提供代理

举个例子

```
➜  ~ proxy-on
➜  ~ brew install ffmpeg
Updating Homebrew...
==> Auto-updated Homebrew!
Updated 1 tap (homebrew/core).
==> Updated Formulae
proxychains-ng ✔           rmlint                     vnstat
ranger                     ruby-install

==> Installing dependencies for ffmpeg: lame, x264, xvid
==> Installing ffmpeg dependency: lame
==> Downloading https://homebrew.bintray.com/bottles/lame-3.99.5.sierra.bottle.1
######################################################################## 100.0%
==> Pouring lame-3.99.5.sierra.bottle.1.tar.gz
🍺  /usr/local/Cellar/lame/3.99.5: 26 files, 2M
==> Installing ffmpeg dependency: x264
==> Downloading https://homebrew.bintray.com/bottles/x264-r2728.sierra.bottle.ta
######################################################################## 100.0%
==> Pouring x264-r2728.sierra.bottle.tar.gz
🍺  /usr/local/Cellar/x264/r2728: 11 files, 3.3M
==> Installing ffmpeg dependency: xvid
==> Downloading https://homebrew.bintray.com/bottles/xvid-1.3.4.sierra.bottle.ta
######################################################################## 100.0%
==> Pouring xvid-1.3.4.sierra.bottle.tar.gz
🍺  /usr/local/Cellar/xvid/1.3.4: 9 files, 1.2M
==> Installing ffmpeg
==> Downloading https://homebrew.bintray.com/bottles/ffmpeg-3.2.2.sierra.bottle.
######################################################################## 100.0%
==> Pouring ffmpeg-3.2.2.sierra.bottle.tar.gz
🍺  /usr/local/Cellar/ffmpeg/3.2.2: 239 files, 50.4M
➜  ~ youtube-dl https://www.youtube.com/watch\?v\=n98cGaLi6sQ
[youtube] n98cGaLi6sQ: Downloading webpage
[youtube] n98cGaLi6sQ: Downloading video info webpage
[youtube] n98cGaLi6sQ: Extracting video information
[youtube] n98cGaLi6sQ: Downloading MPD manifest
[dashsegments] Total fragments: 55
[download] Destination: 【耳機時代】3D環音「STYX HELIX」MYTH&ROID 戴上耳機 進入不一樣的音樂世界！-n98cGaLi6sQ.f136.mp4
[download] 100% of 29.54MiB in 03:03
[dashsegments] Total fragments: 30
[download] Destination: 【耳機時代】3D環音「STYX HELIX」MYTH&ROID 戴上耳機 進入不一樣的音樂世界！-n98cGaLi6sQ.f140.m4a
[download] 100% of 4.32MiB in 01:12
[ffmpeg] Merging formats into "【耳機時代】3D環音「STYX HELIX」MYTH&ROID 戴上耳機 進入不一樣的音樂世界！-n98cGaLi6sQ.mp4"
Deleting original file 【耳機時代】3D環音「STYX HELIX」MYTH&ROID 戴上耳機 進入不一樣的音樂世界！-n98cGaLi6sQ.f136.mp4 (pass -k to keep)
Deleting original file 【耳機時代】3D環音「STYX HELIX」MYTH&ROID 戴上耳機 進入不一樣的音樂世界！-n98cGaLi6sQ.f140.m4a (pass -k to keep)
```

使用代理，更新brew，安装ffmpeg，给youtube—dl添加代理 从youtube上下载了一个mv




-------
相关链接：
1. http://www.tuicool.com/articles/zuQziir
2. https://portal.shadowsocks.com/clientarea.php?action=products
3. https://github.com/shadowsocks/ShadowsocksX-NG
4. https://aiguge.xyz/shadowsocksx-ng/
5. chrome-extension://padekgcemlokbadohgkifijomclgjgif/options.html#/profile/proxy


